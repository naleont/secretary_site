{% extends 'base.html' %}

{% block content %}
<table><tr>
    <td><h2>{{ category['name'] }}</h2></td>
{% if session['type'] == 'team' or session['type'] == 'admin' or session['type'] == 'manager' %}
    <td><a href="/edit_category/{{ category['id'] }}"><button>Редактировать секцию</button></a></td>
{% endif %}
</tr></table>
{{ category['contest'] }}<br>
Направление: {{ category['direction'] }}<br>
{% if category['tg_channel'] %}
Telegram-канал: <a href="https://t.me/{{ category['tg_channel'] }}">@{{ category['tg_channel'] }}</a><br>
{% endif %}
{% if session['type'] == 'team' or session['type'] == 'admin' or session['type'] == 'manager' %}
Руководитель секции: <a href="/supervisor_profile/{{ category['supervisor_id'] }}">{{ category['supervisor'] }}</a><br>
{% else %}
Руководитель секции: {{ category['supervisor'] }}
{% endif %}
{% if category['secretary'] %}
{% if session['type'] == 'team' or session['type'] == 'admin' or session['type'] == 'manager' %}
Секретарь: <a href="/user_page/{{ category['supervisor_id'] }}">{{ category['secretary'] }}</a><br>
{% else %}
Секретарь: {{ category['secretary'] }}<br>
{% endif %}
{% endif %}

<br>
{% if session['type'] == 'admin' or session['type'] == 'org' or session['type'] == 'manager'
or (session['supervisor'] == True and  session['cat_id'] == category['id']) %}
<table frame="void" border="2px" bordercolor="#4962A4">
    <tr>
        <td width="3%" align="center">
            <b>Анализ</b>
        </td>
        <td width="3%" align="center">
            <b>Номер</b>
        </td>
        <td width="50%" align="center">
            <b>Название</b>
        </td>
        <td width="15%" align="center">
            <b>Тур</b>
        </td>
    </tr>
    {% for key in works %}

        <tr>
            <td align="center" valign="bottom">
                <a href="/review_analysis/{{ works[key]['work_id'] }}">
                    {% if works[key]['analysis'] == True %}
                    <div class="green-text" title="Заполнен">
                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
                          <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
                        </svg>
                    </div>
                    {% elif works[key]['analysis'] == False %}
                    <div class="alarm" title="Не заполнен">
                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">
                          <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                        </svg>
                    </div>
                    {% endif %}
                </a>
            </td>
            <td align="center">
                <a href="/review_analysis/{{ works[key]['work_id'] }}">
                    {{ works[key]['work_id'] }}
                </a>
            </td>
            <td>
                <a href="/review_analysis/{{ works[key]['work_id'] }}">
                    {{ works[key]['work_name'] }}<br>
                </a>
            </td>
            <td>
                {{ works[key]['region'] }}
            </td>
        </tr>
    {% endfor %}
</table>
{% endif %}

{% endblock %}